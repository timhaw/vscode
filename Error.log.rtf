{\rtf1\ansi\ansicpg1252\cocoartf2511
\cocoatextscaling0\cocoaplatform0{\fonttbl\f0\fnil\fcharset0 Menlo-Regular;\f1\fswiss\fcharset0 Helvetica-Bold;\f2\fswiss\fcharset0 Helvetica;
}
{\colortbl;\red255\green255\blue255;\red0\green0\blue0;\red38\green38\blue38;\red236\green236\blue236;
\red173\green173\blue173;\red234\green234\blue234;\red60\green98\blue120;}
{\*\expandedcolortbl;;\csgray\c0;\cssrgb\c20000\c20000\c20000;\cssrgb\c94118\c94118\c94118;
\cssrgb\c73333\c73333\c73333;\cssrgb\c93333\c93333\c93333;\cssrgb\c29412\c45882\c54510;}
\paperw11900\paperh16840\margl1440\margr1440\vieww25720\viewh23040\viewkind0
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural\partightenfactor0

\f0\fs22 \cf2 \CocoaLigature0 + PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\
+ JENKINS_USERNAME='aws ssm get-parameters --name Jenkins_Username --query Parameters[*].Value --output text'\
+ JENKINS_PASSWORD='aws ssm get-parameters --name Jenkins_Password --with-decryption --query Parameters[*].Value --output text'\
+ DOCKERHUB_USERNAME='aws ssm get-parameters --name Dockerhub_Username --query Parameters[*].Value --output text'\
+ DOCKERHUB_PASSWORD='aws ssm get-parameters --name Dockerhub_Password --with-decryption --query Parameters[*].Value --output text'\
+ SED=sed\
+ ANSIBLE_JOB='-e '\\''/<description>/r /home/jenkins/ansible.txt'\\'' -e '\\''s/<scriptPath>/&Jenkinsfile/'\\'''\
+ TASKS_JOB='-e '\\''/<description>/r /home/jenkins/tasks.txt'\\'' -e '\\''s/<scriptPath>/&Jenkinsfiles\\/tasks.yml/'\\'''\
+ LOCAL_JOB='-e '\\''/<description>/r /home/jenkins/local.txt'\\'' -e '\\''s/<scriptPath>/&Jenkinsfiles\\/local.yml/'\\'''\
+ JENKINS_SECRET='-e '\\''/<secret-redacted\\/>/\{r /home/jenkins/.ssh/id_rsa'\\'' -e '\\''d\}'\\'''\
+ DOCKER_SSH='-e '\\''s/<id>/&docker-ssh-key/'\\'' -e '\\''s/<user>/docker/'\\'' -e '\\''s/<username>/&docker/'\\'''\
+ JENKINS_SSH='-e '\\''s/<id>/&jenkins-ssh-key/'\\'' -e '\\''s/<user>/jenkins/'\\'' -e '\\''s/<username>/&jenkins/'\\'''\
+ ANSIBLE_SSH='-e '\\''s/<id>/&ansible-ssh-key/'\\'' -e '\\''s/<user>/ansible/'\\'' -e '\\''s/<username>/&ansible/'\\'''\
+ JENKINS_CLI='java -jar /usr/local/lib/jenkins-cli.jar -s http://localhost:8080'\
+ SEMAPHORE_USERNAME='aws ssm get-parameters --name Semaphore_Username --query Parameters[*].Value --output text'\
+ SEMAPHORE_PASSWORD='aws ssm get-parameters --name Semaphore_Password --with-decryption --query Parameters[*].Value --output text'\
++ eval aws ssm get-parameters --name Semaphore_Username --query 'Parameters[*].Value' --output text\
+++ aws ssm get-parameters --name Semaphore_Username --query 'Parameters[*].Value' --output text\
++ eval aws ssm get-parameters --name Semaphore_Password --with-decryption --query 'Parameters[*].Value' --output text\
+++ aws ssm get-parameters --name Semaphore_Password --with-decryption --query 'Parameters[*].Value' --output text\
+ SEMAPHORE_USERPASS='-e "s/<id>/&semaphore/" -e "s/<username>/&admin/" -e "s/<password>/&admin/"'\
++ eval aws ssm get-parameters --name Dockerhub_Username --query 'Parameters[*].Value' --output text\
+++ aws ssm get-parameters --name Dockerhub_Username --query 'Parameters[*].Value' --output text\
++ eval aws ssm get-parameters --name Dockerhub_Password --with-decryption --query 'Parameters[*].Value' --output text\
+++ aws ssm get-parameters --name Dockerhub_Password --with-decryption --query 'Parameters[*].Value' --output text\
+ DOCKERHUB_USERPASS='-e "s/<id>/&dockerhub/" -e "s/<username>/&timhaw/" -e "s/<password>/&pl126wh15/"'\
++ eval aws ssm get-parameters --name Jenkins_Username --query 'Parameters[*].Value' --output text\
+++ aws ssm get-parameters --name Jenkins_Username --query 'Parameters[*].Value' --output text\
++ eval aws ssm get-parameters --name Jenkins_Password --with-decryption --query 'Parameters[*].Value' --output text\
+++ aws ssm get-parameters --name Jenkins_Password --with-decryption --query 'Parameters[*].Value' --output text\
+ AUTH='-auth admin:admin'\
+ STORE='system::system::jenkins '\\''(global)'\\'''\
+ cp /home/jenkins/org.jvnet.hudson.plugins.SSHBuildWrapper.xml /var/jenkins_home\
+ cp /home/jenkins/org.jenkinsci.plugins.workflow.libs.GlobalLibraries.xml /var/jenkins_home\
+ cp /var/jenkins_home/war/WEB-INF/jenkins-cli.jar /usr/local/lib/\
++ sed -e 's/<id>/&semaphore/' -e 's/<username>/&aws ssm get-parameters --name Semaphore_Username --query Parameters[*].Value --output text/' -e 's/<password>/&aws ssm get-parameters --name Semaphore_Password --with-decryption --query Parameters[*].Value --output text/'\
+ eval SEMAPHORE_USERPASS=\
++ SEMAPHORE_USERPASS=\
++ sed -e 's/<id>/&dockerhub/' -e 's/<username>/&aws ssm get-parameters --name Dockerhub_Username --query Parameters[*].Value --output text/' -e 's/<password>/&aws ssm get-parameters --name Dockerhub_Password --with-decryption --query Parameters[*].Value --output text/'\
+ eval DOCKERHUB_USERPASS=\
++ DOCKERHUB_USERPASS=\
+ eval sed -e ''\\''/<description>/r' '/home/jenkins/ansible.txt'\\''' -e ''\\''s/<scriptPath>/&Jenkinsfile/'\\''' /home/jenkins/template.xml\
++ sed -e '/<description>/r /home/jenkins/ansible.txt' -e 's/<scriptPath>/&Jenkinsfile/' /home/jenkins/template.xml\
+ eval sed -e ''\\''/<description>/r' '/home/jenkins/tasks.txt'\\''' -e ''\\''s/<scriptPath>/&Jenkinsfiles\\/tasks.yml/'\\''' /home/jenkins/template.xml\
++ sed -e '/<description>/r /home/jenkins/tasks.txt' -e 's/<scriptPath>/&Jenkinsfiles\\/tasks.yml/' /home/jenkins/template.xml\
+ eval sed -e ''\\''/<description>/r' '/home/jenkins/local.txt'\\''' -e ''\\''s/<scriptPath>/&Jenkinsfiles\\/local.yml/'\\''' /home/jenkins/template.xml\
++ sed -e '/<description>/r /home/jenkins/local.txt' -e 's/<scriptPath>/&Jenkinsfiles\\/local.yml/' /home/jenkins/template.xml\
+ eval sed -e ''\\''/<secret-redacted\\/>/\{r' '/home/jenkins/.ssh/id_rsa'\\''' -e ''\\''d\}'\\''' -e ''\\''s/<id>/&docker-ssh-key/'\\''' -e ''\\''s/<user>/docker/'\\''' -e ''\\''s/<username>/&docker/'\\''' /home/jenkins/ssh_credentials.xml\
++ sed -e '/<secret-redacted\\/>/\{r /home/jenkins/.ssh/id_rsa' -e 'd\}' -e 's/<id>/&docker-ssh-key/' -e 's/<user>/docker/' -e 's/<username>/&docker/' /home/jenkins/ssh_credentials.xml\
+ eval sed -e ''\\''/<secret-redacted\\/>/\{r' '/home/jenkins/.ssh/id_rsa'\\''' -e ''\\''d\}'\\''' -e ''\\''s/<id>/&jenkins-ssh-key/'\\''' -e ''\\''s/<user>/jenkins/'\\''' -e ''\\''s/<username>/&jenkins/'\\''' /home/jenkins/ssh_credentials.xml\
++ sed -e '/<secret-redacted\\/>/\{r /home/jenkins/.ssh/id_rsa' -e 'd\}' -e 's/<id>/&jenkins-ssh-key/' -e 's/<user>/jenkins/' -e 's/<username>/&jenkins/' /home/jenkins/ssh_credentials.xml\
+ eval sed -e ''\\''/<secret-redacted\\/>/\{r' '/home/jenkins/.ssh/id_rsa'\\''' -e ''\\''d\}'\\''' -e ''\\''s/<id>/&ansible-ssh-key/'\\''' -e ''\\''s/<user>/ansible/'\\''' -e ''\\''s/<username>/&ansible/'\\''' /home/jenkins/ssh_credentials.xml\
++ sed -e '/<secret-redacted\\/>/\{r /home/jenkins/.ssh/id_rsa' -e 'd\}' -e 's/<id>/&ansible-ssh-key/' -e 's/<user>/ansible/' -e 's/<username>/&ansible/' /home/jenkins/ssh_credentials.xml\
+ eval sed /home/jenkins/userpass_credentials.xml\
++ sed /home/jenkins/userpass_credentials.xml\
sed: -e expression #1, char 7: unknown command: `j'\
Cloud-init v. 19.2-36-g059d049c-0ubuntu2~16.04.1 running 'modules:final' at Wed, 12 Feb 2020 12:37:44 +0000. Up 23.43 seconds.\
2020-02-12 12:40:27,873 - util.py[WARNING]: Failed running /var/lib/cloud/instance/scripts/part-011 [1]\
\
-rw-r--r-- 1 root    root    1320 Feb 12 12:40 tasks.xml\
-rw-r--r-- 1 root    root    1597 Feb 12 12:40 ansible.xml\
-rw-r--r-- 1 root    root    1298 Feb 12 12:40 local.xml\
-rw-r--r-- 1 root    root       0 Feb 12 12:40 semaphore_credentials.xml\
-rw-r--r-- 1 root    root    2238 Feb 12 12:40 jenkins_credentials.xml\
-rw-r--r-- 1 root    root    2235 Feb 12 12:40 docker_credentials.xml\
-rw-r--r-- 1 root    root    2238 Feb 12 12:40 ansible_credentials.xml\
\
/var/lib/cloud/instance/scripts/part-011\
\
#!/bin/bash -xe\
\
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\
JENKINS_USERNAME="aws ssm get-parameters --name Jenkins_Username --query Parameters[*].Value --output text"\
JENKINS_PASSWORD="aws ssm get-parameters --name Jenkins_Password --with-decryption --query Parameters[*].Value --output text"\
DOCKERHUB_USERNAME="aws ssm get-parameters --name Dockerhub_Username --query Parameters[*].Value --output text"\
DOCKERHUB_PASSWORD="aws ssm get-parameters --name Dockerhub_Password --with-decryption --query Parameters[*].Value --output text"\
SED="sed"\
ANSIBLE_JOB="-e '/<description>/r /home/jenkins/ansible.txt' -e 's/<scriptPath>/&Jenkinsfile/'"\
TASKS_JOB="-e '/<description>/r /home/jenkins/tasks.txt' -e 's/<scriptPath>/&Jenkinsfiles\\\\/tasks.yml/'"\
LOCAL_JOB="-e '/<description>/r /home/jenkins/local.txt' -e 's/<scriptPath>/&Jenkinsfiles\\\\/local.yml/'"\
JENKINS_SECRET="-e '/<secret-redacted\\\\/>/\{r /home/jenkins/.ssh/id_rsa' -e 'd\}'"\
DOCKER_SSH="-e 's/<id>/&docker-ssh-key/' -e 's/<user>/docker/' -e 's/<username>/&docker/'"\
JENKINS_SSH="-e 's/<id>/&jenkins-ssh-key/' -e 's/<user>/jenkins/' -e 's/<username>/&jenkins/'"\
ANSIBLE_SSH="-e 's/<id>/&ansible-ssh-key/' -e 's/<user>/ansible/' -e 's/<username>/&ansible/'"\
JENKINS_CLI="java -jar /usr/local/lib/jenkins-cli.jar -s http://localhost:8080"\
SEMAPHORE_USERNAME="aws ssm get-parameters --name Semaphore_Username --query Parameters[*].Value --output text"\
SEMAPHORE_PASSWORD="aws ssm get-parameters --name Semaphore_Password --with-decryption --query Parameters[*].Value --output text"\
SEMAPHORE_USERPASS="-e \\"s/<id>/&semaphore/\\" -e \\"s/<username>/&`eval $SEMAPHORE_USERNAME`/\\" -e \\"s/<password>/&`eval $SEMAPHORE_PASSWORD`/\\""\
DOCKERHUB_USERPASS="-e \\"s/<id>/&dockerhub/\\" -e \\"s/<username>/&`eval $DOCKERHUB_USERNAME`/\\" -e \\"s/<password>/&`eval $DOCKERHUB_PASSWORD`/\\""\
AUTH="-auth `eval $JENKINS_USERNAME`:`eval $JENKINS_PASSWORD`"\
STORE="system::system::jenkins '(global)'"\
\
# 7. configure jenkins\
cp /home/jenkins/org.jvnet.hudson.plugins.SSHBuildWrapper.xml /var/jenkins_home\
cp /home/jenkins/org.jenkinsci.plugins.workflow.libs.GlobalLibraries.xml /var/jenkins_home\
cp /var/jenkins_home/war/WEB-INF/jenkins-cli.jar /usr/local/lib/\
eval SEMAPHORE_USERPASS=`sed -e 's/<id>/&semaphore/' -e "s/<username>/&$SEMAPHORE_USERNAME/" -e "s/<password>/&$SEMAPHORE_PASSWORD/"`\
eval DOCKERHUB_USERPASS=`sed -e 's/<id>/&dockerhub/' -e "s/<username>/&$DOCKERHUB_USERNAME/" -e "s/<password>/&$DOCKERHUB_PASSWORD/"`\
eval $SED $ANSIBLE_JOB /home/jenkins/template.xml > /home/jenkins/ansible.xml\
eval $SED $TASKS_JOB /home/jenkins/template.xml > /home/jenkins/tasks.xml\
eval $SED $LOCAL_JOB /home/jenkins/template.xml > /home/jenkins/local.xml\
eval $SED $JENKINS_SECRET $DOCKER_SSH /home/jenkins/ssh_credentials.xml > /home/jenkins/docker_credentials.xml\
eval $SED $JENKINS_SECRET $JENKINS_SSH /home/jenkins/ssh_credentials.xml > /home/jenkins/jenkins_credentials.xml\
eval $SED $JENKINS_SECRET $ANSIBLE_SSH /home/jenkins/ssh_credentials.xml > /home/jenkins/ansible_credentials.xml\
eval $SED $SEMAPHORE_USERPASS /home/jenkins/userpass_credentials.xml > /home/jenkins/semaphore_credentials.xml\
eval $SED $DOCKERHUB_USERPASS /home/jenkins/userpass_credentials.xml > /home/jenkins/dockerhub_credentials.xml\
until $(curl --output /dev/null --silent --head --fail http://localhost:8080)\
  do sleep 1\
done\
sleep 1\
eval $JENKINS_CLI $AUTH create-credentials-by-xml $STORE < /home/jenkins/docker_credentials.xml\
eval $JENKINS_CLI $AUTH create-credentials-by-xml $STORE < /home/jenkins/jenkins_credentials.xml\
eval $JENKINS_CLI $AUTH create-credentials-by-xml $STORE < /home/jenkins/ansible_credentials.xml\
eval $JENKINS_CLI $AUTH create-credentials-by-xml $STORE < /home/jenkins/semaphore_credentials.xml\
eval $JENKINS_CLI $AUTH create-credentials-by-xml $STORE < /home/jenkins/dockerhub_credentials.xml\
eval $JENKINS_CLI $AUTH create-job ansible < /home/jenkins/ansible.xml\
eval $JENKINS_CLI $AUTH create-job tasks < /home/jenkins/tasks.xml\
eval $JENKINS_CLI $AUTH create-job local < /home/jenkins/local.xml\
\
root@docker:/home/jenkins# \
\
root@docker:~# blkid -o value -s TYPE /dev/nvme1n1\
LVM2_member\
\
root@docker:~# pvcreate /dev/nvme1n1\
Physical volume "/dev/nvme1n1" successfully created\
\
\pard\pardeftab720\partightenfactor0

\f1\b\fs42 \cf3 \expnd0\expndtw0\kerning0
\CocoaLigature1 Unreadable Data\
\pard\pardeftab720\partightenfactor0

\f2\b0\fs28 \cf3 It is ok to leave unreadable data in these items/records, as Jenkins will simply ignore it. To avoid the log messages at Jenkins startup you can permanently delete the unreadable data by resaving these items/records using the button below the list.\

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrt\brdrs\brdrw20\brdrcf5 \trbrdrl\brdrs\brdrw20\brdrcf5 \trbrdrr\brdrs\brdrw20\brdrcf5 
\clvertalc \clcbpat4 \clwWidth6301\clftsWidth3 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt120 \clpadl80 \clpadb120 \clpadr80 \gaph\cellx2880
\clvertalc \clcbpat4 \clwWidth2043\clftsWidth3 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt120 \clpadl80 \clpadb120 \clpadr80 \gaph\cellx5760
\clvertalc \clcbpat4 \clwWidth8402\clftsWidth3 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt120 \clpadl80 \clpadb120 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\partightenfactor0

\f1\b \cf3 Type\cell 
\pard\intbl\itap1\pardeftab720\partightenfactor0
\cf3 Name\cell 
\pard\intbl\itap1\pardeftab720\partightenfactor0
\cf3 Error\cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrs\brdrw20\brdrcf5 \trbrdrb\brdrs\brdrw20\brdrcf5 \trbrdrr\brdrs\brdrw20\brdrcf5 
\clvertalc \clshdrawnil \clwWidth6301\clftsWidth3 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt60 \clpadl80 \clpadb60 \clpadr80 \gaph\cellx2880
\clvertalc \clshdrawnil \clwWidth2043\clftsWidth3 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt60 \clpadl80 \clpadb60 \clpadr80 \gaph\cellx5760
\clvertalc \clshdrawnil \clwWidth8402\clftsWidth3 \clbrdrt\brdrnil \clbrdrl\brdrnil \clbrdrb\brdrnil \clbrdrr\brdrnil \clpadt60 \clpadl80 \clpadb60 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\partightenfactor0

\f2\b0 \cf3 org.jenkinsci.plugins.workflow.libs.GlobalLibraries\cell 
\pard\intbl\itap1\pardeftab720\partightenfactor0
\cf3 GlobalLibraries\cell 
\pard\intbl\itap1\pardeftab720\partightenfactor0
\cf3 CannotResolveClassException: jenkins.plugins.git.GitSCMSource\\\cell \lastrow\row
\pard\pardeftab720\partightenfactor0
\cf3 \
\pard\pardeftab720\partightenfactor0

\f1\b\fs24 \cf6 \cb7 Discard Unreadable Data\
\

\f0\b0\fs22 \cf2 \cb1 \kerning1\expnd0\expndtw0 \CocoaLigature0 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural\partightenfactor0
\
claranet\
}